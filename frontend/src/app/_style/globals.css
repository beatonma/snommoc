@import "tailwindcss";
@import "./theme.css";
@import "./window-insets.css";

@custom-variant touch (@media(pointer: coarse));
@custom-variant dark {
  &:where([data-theme="dark"], [data-theme="dark"] *) {
    @slot;
  }

  @media (prefers-color-scheme: dark) {
    &:where([data-theme="system"], [data-theme="system"] *) {
      @slot;
    }
  }
}

@theme {
  --breakpoint-sm: 40rem;
  --breakpoint-md: 48rem;
  --breakpoint-lg: 64rem;
  --breakpoint-xl: 80rem;
  --breakpoint-2xl: 96rem;

  /**
   * Additional container sizes which match breakpoint definitions.
   * For components which are ostensibly but not necessarily full-screen.
   */
  --container-bp_sm: 40rem;
  --container-bp_md: 48rem;
  --container-bp_lg: 64rem;
  --container-bp_xl: 80rem;
  --container-bp_2xl: 96rem;

  --container-3xs: 16rem;
  --container-2xs: 18rem;
  --container-xs: 20rem;
  --container-sm: 24rem;
  --container-md: 28rem;
  --container-lg: 32rem;
  --container-xl: 36rem;
  --container-2xl: 42rem;
  --container-3xl: 48rem;
  --container-4xl: 56rem;
  --container-5xl: 64rem;
  --container-6xl: 72rem;
  --container-7xl: 80rem;

  --color-house-commons: rgb(0 110 70);
  --color-house-commons-dark: #005434;
  --color-house-commons-darker: #004229;
  --color-house-on_commons: #fff;

  --color-house-lords: rgb(181 9 56);
  --color-house-lords-dark: #540016;
  --color-house-lords-darker: #420012;
  --color-house-on_lords: #fff;

  --list-style-type-square: square;

  --transition-duration: 220ms;

  --spacing-ch: 1ch;
  --spacing-em: 1em;
  --spacing-readable: 800px; /* js */
  --spacing-max-grid-width: 1350px; /* js */

  --spacing-listitem_card: min(100%, 400px);
}

::selection {
  background-color: color-mix(in srgb, var(--surface), var(--primary));
  color: var(--on_primary);
}

@layer base {
  img {
    @apply object-cover;
  }

  address {
    @apply not-italic;
  }

  h1 {
    @apply text-4xl;
  }
  h2 {
    @apply text-3xl;
  }
  h3 {
    @apply text-2xl;
  }
  h4 {
    @apply text-xl;
  }

  section {
    @apply column gap-y-2;
    > h1,
    > h2,
    > h3,
    > h4,
    > h5,
    > h6 {
      @apply leading-relaxed;
    }

    &:not(:last-child) {
      @apply mb-12;
    }

    section:not(:last-child) {
      @apply mb-8;
    }
  }

  ul {
    @apply list-inside list-disc;

    li::marker {
      color: var(--color-list-marker);
    }
  }

  input,
  select {
    --surface: var(--surface_alt);
    @apply bg-surface text-on_surface rounded-sm px-2 py-1;
  }

  table {
    @apply card surface w-fit sm:rounded-lg;

    thead th:not(:empty) {
      @apply border-primary/25 border-b-[0.1px] py-2;
    }
    tfoot {
      @apply border-primary/25 border-t-[0.1px] py-2;
    }

    tbody th {
      @apply border-primary/25 border-r-[0.1px] text-right;
    }

    tbody tr {
      @apply transition-colors;
      &:hover {
        @apply bg-hover;
      }
    }

    th,
    td {
      @apply px-4 py-1.5 text-left;
    }
  }
}

@layer components {
  .overflow-auto,
  .overflow-x-auto,
  .overflow-y-auto {
    @media (pointer: coarse) {
      scrollbar-width: none;
    }
    @media (pointer: fine) {
      scrollbar-width: thin;
    }

    ::-webkit-scrollbar-track {
      background-color: transparent;
    }
  }
}

@layer components {
  .readable {
    @apply max-w-readable w-full;
  }

  .text-reduced {
    /**
   * Reduce emphasis by fading the currentColor.
   */
    color: color-mix(in srgb, currentColor 85%, transparent);
  }

  .hover-overlay {
    @apply relative;

    &::after {
      @apply absolute inset-0 bg-transparent transition-[background-color] content-[''];
    }

    &:hover::after {
      @apply bg-current/10;
    }
  }
}

@utility surface {
  @apply bg-surface text-on_surface;
}
@utility surface-hover {
  @apply surface hover:bg-surface_hover transition-colors;
}
@utility surface-alt {
  @apply bg-surface_alt text-on_surface;
}
@utility surface-invert {
  @apply bg-invert_surface text-invert_on_surface;
}
@utility surface-primary {
  @apply bg-primary text-on_primary contrast-less:surface-primary-tint;
}
@utility surface-primary-tint {
  @apply surface;

  @variant dark {
    background-color: color-mix(in srgb, var(--primary) 3%, var(--surface));
  }
}
@utility surface-primary-tint-hover {
  @apply surface-primary-tint transition-colors;
  &:hover {
    background-color: color-mix(in srgb, var(--primary) 7.5%, var(--surface));
  }
}
@utility surface-accent {
  @apply bg-accent text-on_accent;
}
@utility hover {
  @apply hover:bg-hover transition-colors;
}
@utility surface-commons {
  @apply bg-house-commons text-house-on_commons;
}
@utility surface-lords {
  @apply bg-house-lords text-house-on_lords;
}
@utility card {
  @apply overflow-hidden shadow-md sm:rounded-lg;
}
@utility card-content {
  @apply px-4 py-2;
}
@utility chip {
  @apply touch-target overflow-hidden rounded-md shadow-sm;
}
@utility chip-content {
  @apply px-2 py-0.5 text-sm select-none;
}
@utility touch-target {
  @variant touch {
    @apply min-h-8 min-w-8;
  }
}

@utility row {
  @apply flex flex-row items-center [&>*]:shrink-0;
}
@utility column {
  @apply flex flex-col;
}

/** Default grid style for <SearchList /> */
@utility search-results-grid {
  @apply grid grid-cols-[repeat(auto-fit,var(--spacing-listitem_card))] gap-x-8 gap-y-4;
}
